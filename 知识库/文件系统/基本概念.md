![[硬盘.png]]

## 磁盘IO耗时
1. 首先是磁头移动寻找数据所在的磁道：==寻道时间==
2. 然后再盘面旋转，寻找到对应的扇区： ==旋转延迟==
3. 向目标扇区读取或者写入数据： ==存取时间==
---

### 操作系统如何降低随机读写的性能

- 通过按磁道对应的柱面划分分区，降低寻道时间

## 文件系统
#### 文件和目录创建所需资源

- 文件和目录的创建都需要占用一个**inode**(*255byte*)
- 空的目录会占用一个**block**大小(*约4k*)
	- block是基本的分配单位
	- 因为其必须默认带两个目录项"."和".."
- 目录的占用空间会包含文件名的大小
	- 也就是目录下的文件越多越长也会导致目录占用的大小
	- linux默认文件名长度限制255byte
- block
	- <font color=#81B300>文件block</font>
		- 只会保存文件数据，只要有文件数据都会至少分配一个block
	- <font color=#81B300>目录block</font>
		- 会保存很多文件系统的结构体
- 磁盘发起io也是以block size 为单位的

### linux IO栈
![[linux IO栈.png]]

#### 用户层lib库
1.同步引擎
	- sync
	- psync
	- vsync
	- pvsync
![[Pasted image 20240722154818.png]]